define(["jquery","jqueryui","core/config","core/ajax","core/notification"],function(a,b,c,d,e){return{init:function(b,c){function f(b){if(a("#prospectivelist li").remove(),!b.length)return void a("#noprospective").show();a("#noprospective").hide();var c=[];a.each(b,function(a,b){c.push('<li class="text-truncate" data-courseid="'+b.id+'"><i class="fa fa-globe"></i> '+b.fullname+"</li>")}),a("#prospectivelist").append(c.join(""))}function g(){var b=a("#coursefilter").val();d.call([{methodname:"local_iomad_learningpath_getprospectivecourses",args:{pathid:c,filter:b},done:function(a){f(a)},fail:e.exception}])}function h(b){if(a("#pathcourselist li").remove(),!b.length)return void a("#nopathcourses").show();a("#nopathcourses").hide();var c=[];a.each(b,function(a,b){c.push('<li class="text-truncate" data-courseid="'+b.id+'"><i class="fa fa-globe"></i> '+b.fullname+"</li>")}),a("#pathcourselist").append(c.join(""))}function i(){d.call([{methodname:"local_iomad_learningpath_getcourses",args:{pathid:c},done:function(a){h(a)},fail:e.exception}])}require(["theme_boost/loader"]),require(["theme_boost/tooltip"],function(){a('[data-toggle="tooltip"]').tooltip()}),a(window).on("load",g()),a("#coursefilter").on("input",function(){g()}),a("#prospectivelist, #pathcourselist").on("mouseenter","li",function(){a(this).addClass("text-primary")}),a("#prospectivelist, #pathcourselist").on("mouseleave","li",function(){a(this).removeClass("text-primary")}),a(window).on("load",i()),a("#prospectivelist").on("click","li",function(){var b=a(this).data("courseid");d.call([{methodname:"local_iomad_learningpath_addcourses",args:{pathid:c,courseids:[b]},done:function(){i(),g()},fail:e.exception}])}),a("#pathcourselist").on("click","li",function(){var b=a(this).data("courseid");d.call([{methodname:"local_iomad_learningpath_removecourses",args:{pathid:c,courseids:[b]},done:function(){i(),g()},fail:e.exception}])}),a("#pathcourselist").sortable({update:function(){var b=[];a("#pathcourselist li").each(function(){b.push(a(this).data("courseid"))}),d.call([{methodname:"local_iomad_learningpath_ordercourses",args:{pathid:c,courseids:b},done:function(){},fail:e.exception}])}})}}});